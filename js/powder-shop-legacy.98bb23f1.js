"use strict";(self["webpackChunkv3"]=self["webpackChunkv3"]||[]).push([[795],{70513:function(){},26771:function(e,t,n){n(21249);var i=n(73396),o=n(76163);t["Z"]={name:"ctrlf-component",props:{events:{type:Array,required:!1,default:function(){return[]}},renderBox:{type:Boolean,required:!1,default:!0},searchFunction:{type:Function,required:!0},toDisplay:{type:Function,required:!0}},data:function(){return{render:!1,localRenderBox:!1,current:0,results:[],hideResultsBox:!1}},watch:{renderBox:{immediate:!0,handler:function(e){this.localRenderBox=e}}},computed:{mobile:function(){return!0}},created:function(){document.addEventListener("keydown",this.openCtrl,!0)},beforeUnmount:function(){document.removeEventListener("keydown",this.openCtrl,!0)},mounted:function(){},methods:{openCtrl:function(e){e.ctrlKey&&"f"===e.key&&(e.preventDefault(),this.render=!0,this.openSearchBar())},openSearchBar:function(){this.render=!0,this.focusInput(),this.selectInputContent()},focus:function(){this.focusInput(),this.selectInputContent()},focusInput:function(){var e=this;this.$nextTick((function(){e.$refs["input-search-box"].focus()}))},selectInputContent:function(){var e=this;this.$nextTick((function(){e.$refs["input-search-box"].select()}))},searchEvent:(0,o.Ds)((function(e){this.results=this.searchFunction(e.target.value),this.current=0,this.clickEvent(this.results[this.current])}),400),goToSearchEvent:function(e){this.results.length&&(this.current=e,this.current<0&&(this.current=this.results.length-1),this.current>this.results.length-1&&(this.current=0),this.clickEvent(this.results[this.current]))},clickEvent:function(e){this.$emit("event",e)},closeSearchBar:function(){this.render=!1}},render:function(){var e=this;return(0,i.h)("div",{class:"search-box-pos",style:{display:this.render?"":"none"}},[(0,i.h)("div",{class:"ch-search-box"},[(0,i.h)("input",{ref:"input-search-box",onInput:function(t){return e.searchEvent(t)},onKeydown:function(t){("enter"===t.key||13===t.keyCode)&&e.goToSearchEvent(e.current+1)},autocomplete:"off"}),(0,i.h)("div",{},Math.min(this.current+1,this.results.length)+"/"+this.results.length),(0,i.h)("span",{class:["fas fa-angle-up",{disabled:0===this.results.length}],onClick:function(){return e.goToSearchEvent(e.current+1)}}),(0,i.h)("span",{class:["fas fa-angle-down",{disabled:0===this.results.length}],onClick:function(){return e.goToSearchEvent(e.current-1)}}),(0,i.h)("span",{class:"fas fa-bars",onClick:function(){return e.localRenderBox=!e.localRenderBox}}),(0,i.h)("span",{class:"fas fa-times",onClick:function(){return e.closeSearchBar()}})]),this.localRenderBox?(0,i.h)("div",{class:["search-results-box",{hidebox:this.hideResultsBox}]},this.results.map((function(t,n){return(0,i.h)("div",{class:["item",{active:n===e.current}],onClick:function(){return e.goToSearchEvent(n)}},e.toDisplay(t))}))):null])}}},76163:function(e,t,n){n.d(t,{Ds:function(){return i},P2:function(){return o}});n(74916),n(23123);function i(e,t){var n=null;return function(){clearTimeout(n);var i=arguments,o=this;n=setTimeout((function(){e.apply(o,i)}),t)}}function o(e,t){var n=!1;return function(){n||(e.apply(this,arguments),n=!0,setTimeout((function(){n=!1}),t))}}},15614:function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});n(41539),n(33948),n(54747),n(57327),n(82772),n(21249);var i=n(73396),o=n(77524),s=n(46909),r=n(42536),c=n(35089),a=n(76163),l={};function h(e){l.start||(l.start=e.touches[0]||e.changedTouches[0])}function u(e){e.preventDefault()}function d(e){var t=e.touches[0]||e.changedTouches[0];if(l.start){if(l.start.clientX-t.clientX>50){var n=new CustomEvent("swipe-left",{bubbles:!0,cancelable:!1});e.target.dispatchEvent(n)}else if(l.start.clientX-t.clientX<-50){var i=new CustomEvent("swipe-right",{bubbles:!0,cancelable:!1});e.target.dispatchEvent(i)}else if(l.start.clientY-t.clientY>50){var o=new CustomEvent("swipe-down",{bubbles:!0,cancelable:!1});e.target.dispatchEvent(o)}else if(l.start.clientY-t.clientY<-50){var s=new CustomEvent("swipe-up",{bubbles:!0,cancelable:!1});e.target.dispatchEvent(s)}delete l.start}}var f={name:"powder-shop",components:{ctrlf:s.Z},data:function(){return{shop:[],artifacts:null,slide:0,focused:null,observer:null,animationEnter:"slide-from-right",openShopList:!1}},computed:{mobile:function(){return this.$store.state.isMobile},saveDataMode:function(){return this.mobile}},watch:{slide:function(e,t){this.focused=null,this.animationEnter=t>e?"slide-from-right":"slide-from-left"}},beforeCreate:function(){this.$store.commit("loading",!0)},created:function(){var e=this;this.toggleLoading(!0),Promise.all([this.$store.dispatch("GET_POWDER_SHOP"),this.$store.dispatch("GET_ARTIFACT_DB")]).then((function(t){e.shop=t[0],e.artifacts=t[1],e.ready=!0,e.$nextTick((function(){e.toggleLoading(!1),e.createObserver();var t=document.getElementById("shop-slides");t.addEventListener("wheel",e.mousewheel,{passive:!0}),document.addEventListener("keydown",e.handleKeyDown,!1),t.addEventListener("touchstart",h,{passive:!0}),t.addEventListener("touchmove",u,{passive:!1}),t.addEventListener("touchend",d,{passive:!0})}))})).catch((function(e){return console.log(e)}))},beforeUnmount:function(){var e=this,t=document.getElementById("shop-slides");document.removeEventListener("keydown",this.handleKeyDown),t.removeEventListener("wheel",this.mousewheel),t.removeEventListener("touchstart",h),t.removeEventListener("touchmove",u),t.removeEventListener("touchend",d);var n=document.querySelectorAll("li");n.forEach((function(t){e.observer.unobserve(t)})),this.destroyObserver(),this.observer=null},mounted:function(){},beforeUpdate:function(){},updated:function(){},methods:{home:function(){this.$store.commit("toggleMainMenu")},toggleLoading:function(e,t){this.$store.commit("loading",e,t)},loading:function(){var e=this;return this.$store.commit("loading",!0),new Promise((function(t){setTimeout((function(){t(),e.$nextTick((function(){e.$store.commit("loading",!1)}))}),0)}))},artifact:function(e){return this.$store.getters.getArtifact(e)},getArtifactName:function(e){return this.$store.getters.getArtifactName(e)},getArtifactIcon:function(e){return this.$store.getters.getArtifactIcon(e)},getArtifactImage:function(e){return this.$store.getters.getArtifactImage(e)},getRarityIcon:function(e){return this.$store.getters.getRarityIcon(e)},getRoleIcon:function(e){return this.$store.getters.getRoleIcon(e)},toggleShopList:function(){this.openShopList=!this.openShopList},focusArtifact:function(e){this.focused!==e?this.focused=e:this.focused=null},searchFunction:function(e){var t=this,n=this.shop;if(!n.length||!e)return[];var i=e.toLowerCase();return n.filter((function(e){return!(!e.a||!Array.isArray(e.a))&&e.a.some((function(e){return-1!==t.$store.getters.getArtifactName(e.id).toLowerCase().indexOf(i)}))}))},searchToDisplay:function(e){return e.dt.join(" ~ ")},goToResult:function(e){var t=this;this.shop.forEach((function(n,i){n===e&&(t.slide=i)}))},mousewheel:(0,a.P2)((function(e){e.deltaY<0?this.slide>0&&(document.getElementById("shop-slides").scrollTop=(this.slide-1)*window.innerHeight):this.slide<this.shop.length&&(document.getElementById("shop-slides").scrollTop=(this.slide+1)*window.innerHeight)}),300),scrollSlide:function(){var e=this,t=document.body.scrollTop;window.requestAnimationFrame((function(){var n=document.body.scrollTop;t>=n?e.slide>0&&(window.scrollY=(e.slide-1)*window.innerHeight-10):e.slide<e.shop.length&&(window.scrollY=(e.slide+1)*window.innerHeight-10)}))},scrollBySwipe:function(e){e>0&&this.slide<this.shop.length?document.getElementById("shop-slides").scrollTop=(this.slide+1)*window.innerHeight:e<0&&this.slide>0&&(document.getElementById("shop-slides").scrollTop=(this.slide-1)*window.innerHeight)},handleKeyDown:(0,a.P2)((function(e){e.ctrlKey||"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&"true"!=e.target.contentEditable&&(e.preventDefault(),39===e.keyCode||"ArrowRight"===e.key||40===e.keyCode||"ArrowDown"===e.key||68===e.keyCode||"d"===e.key?this.scrollBySwipe(1):37!==e.keyCode&&"ArrowLeft"!==e.key&&38!==e.keyCode&&"ArrowUp"!==e.key&&65!==e.keyCode&&"a"!==e.key||this.scrollBySwipe(-1))}),300),scrollToSelected:function(e){document.getElementById("shop-slides").scrollTop=e*window.innerHeight},createObserver:function(){var e=this,t={root:null,rootMargin:"0px",threshold:.8};this.observer=new IntersectionObserver((function(t){t.forEach((function(t){var n=parseInt(t.target.attributes.index.value);t.isIntersecting&&(e.slide=n)}))}),t);var n=document.querySelectorAll("li");n.forEach((function(t){e.observer.observe(t)}))},destroyObserver:function(){this.observer&&this.observer.disconnect()}},render:function(){var e=this;return(0,i.h)("section",{class:"",id:"shop-container"},[(0,i.h)(r.Z,{mobile:this.mobile,options:[{title:"Search",class:"fa fa-search",click:"search"},{title:"Home",class:"fa fa-home",click:"home"}],onHome:function(){return e.home()},onSearch:function(){return e.$refs.ctrlf.openSearchBar()}}),(0,i.h)(s.Z,{ref:"ctrlf",events:this.shop,searchFunction:this.searchFunction,toDisplay:this.searchToDisplay,onEvent:this.goToResult}),(0,i.h)("ul",{style:{width:"100%",height:"100%",overflow:"auto"},id:"shop-slides",onSwipeLeft:function(){return e.scrollBySwipe(1)},onSwipeRight:function(){return e.scrollBySwipe(-1)},onSwipeUp:function(){return e.scrollBySwipe(-1)},onSwipeDown:function(){return e.scrollBySwipe(1)}},[this.shop[this.slide]?(0,i.h)(o.uT,{name:this.animationEnter},(function(){return[(0,i.h)("div",{key:e.slide,class:"powder-slide-rotations",style:{position:"absolute","z-index":1,top:0,left:0}},[(0,i.h)("div",{class:"title-container"},[(0,i.h)("button",{class:["fa rotation-list-btn",{"fa-list":!e.openShopList,"fa-times":e.openShopList}],onClick:function(){return e.toggleShopList()}}),e.shop[e.slide].nid?(0,i.wy)((0,i.h)("a",{target:"_blank",href:"https://page.onstove.com/epicseven/global/view/"+e.shop[e.slide].nid,crossorigin:"anonymous",SameSite:"Lax",style:{float:"right",height:"100%",width:"110px","margin-right":"14px",background:"url(https://static-cdn.onstove.com/0.0.14/img/gnb/bi.svg) no-repeat scroll 0% 50%"}}),[[c.Z,"Read notice on stove"]]):null,(0,i.h)("span",{style:{float:"left","padding-left":"10px"}},e.slide+1+"/"+e.shop.length),(0,i.h)("div",{style:{margin:"0 180px 0 55px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},e.shop[e.slide].dt.join(" ~ "))]),(0,i.h)("div",{class:"rotation"},[e.saveDataMode?(0,i.h)("div",{style:{"align-self":"center",width:"100%","max-width":"450px"}},[e.shop[e.slide].a.map((function(t){var n=(window.innerHeight-100)/e.shop[e.slide].a.length+"px";return(0,i.h)("div",{style:{display:"flex",width:"100%","align-items":"center"}},[(0,i.h)("img",{src:e.getArtifactIcon(t.id),crossorigin:"anonymous",SameSite:"Lax",style:{height:n}}),(0,i.h)("img",{src:e.getRoleIcon(e.artifact(t.id).role),style:{height:"30px"}}),(0,i.h)("span",{style:{flex:1,margin:"0 20px"}},e.getArtifactName(t.id)),(0,i.h)("span",{style:{overflow:"hidden","white-space":"nowrap","padding-left":"8px"}},new Array(e.artifact(t.id).rarity||1).fill((0,i.h)("img",{src:e.getRarityIcon(),style:{height:"20px","margin-left":"-8px","vertical-align":"middle"}})))])}))]):e.shop[e.slide].a.map((function(t,n){return(0,i.h)("div",{class:["artifact",{focused:e.focused===n}],onClick:function(){return e.focusArtifact(n)}},[(0,i.h)("img",{class:"artwork",crossorigin:"anonymous",SameSite:"Lax",src:e.getArtifactImage(t.id),onLoad:function(e){return e.target.style.opacity=1}}),(0,i.h)("span",{style:{"padding-left":"8px"}},new Array(e.artifact(t.id).rarity||1).fill((0,i.h)("img",{src:e.getRarityIcon(),SameSite:"Lax",crossorigin:"anonymous",style:{height:"20px","margin-left":"-8px","vertical-align":"middle"}}))),(0,i.h)("span",{class:"vertical-name"},e.getArtifactName(t.id))])})),e.shop[e.slide].content?(0,i.h)("div",{innerHTML:e.shop[e.slide].content}):null])])]})):null,this.shop.map((function(e,t){return(0,i.h)("li",{class:"powder-slide-rotations",style:{visibility:"hidden"},index:t},[(0,i.h)("div",{class:"title-container"},"Data della rotazione"),(0,i.h)("div",{class:"rotation"})])}))]),this.shop&&this.openShopList?(0,i.h)("div",{class:"glass-container rotation-list-box"},[this.shop.map((function(t,n){return(0,i.h)("div",{class:["elements",{active:e.slide===n}],onClick:function(){return e.scrollToSelected(n)}},n+1+". "+t.dt[0])}))]):null])}};const p=f;var g=p},46909:function(e,t,n){var i=n(93134);n(91010);const o=i.Z;t["Z"]=o},91010:function(e,t,n){n(70513)},93134:function(e,t,n){n.d(t,{Z:function(){return i.Z}});var i=n(26771)}}]);