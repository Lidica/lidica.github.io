(self["webpackChunkv3"]=self["webpackChunkv3"]||[]).push([[795],{24234:function(t,e,n){"use strict";n.r(e);var i=n(8081),o=n.n(i),r=n(23645),s=n.n(r),a=s()(o());a.push([t.id,"#shop-container{height:100%!important}.slide-from-left-enter-active{-webkit-animation:rotation-slide-in .5s;animation:rotation-slide-in .5s}.slide-from-left-leave-active{-webkit-animation:rotation-slide-out .5s;animation:rotation-slide-out .5s}.slide-from-right-enter-active{-webkit-animation:rotation-slide-in-left .5s;animation:rotation-slide-in-left .5s}.slide-from-right-leave-active{-webkit-animation:rotation-slide-out .5s;animation:rotation-slide-out .5s}@-webkit-keyframes rotation-slide-in{0%{transform:translateX(70%) scale(.85)}to{transform:translateX(0) scale(1)}}@keyframes rotation-slide-in{0%{transform:translateX(70%) scale(.85)}to{transform:translateX(0) scale(1)}}@-webkit-keyframes rotation-slide-in-left{0%{transform:translateX(-70%) scale(.85)}to{transform:translateX(0) scale(1)}}@keyframes rotation-slide-in-left{0%{transform:translateX(-70%) scale(.85)}to{transform:translateX(0) scale(1)}}@-webkit-keyframes rotation-slide-out{0%{transform:scale(1)}to{transform:scale(.85)}}@keyframes rotation-slide-out{0%{transform:scale(1)}to{transform:scale(.85)}}.powder-slide-rotations{display:inline-block;width:100%;height:100%;background-color:#252526}.powder-slide-rotations>.title-container{height:45px;width:100%;background-color:#fff;color:#000;text-align:center;line-height:45px;overflow:hidden;text-overflow:clip;white-space:nowrap}.powder-slide-rotations>.rotation{display:flex;width:100%;height:calc(100% - 45px);justify-content:center}.powder-slide-rotations>.rotation>.artifact{flex:1;position:relative;overflow:hidden;height:100%;max-width:378px;display:inline-block;transition:all .3s ease;-webkit-filter:grayscale(50%);filter:grayscale(50%)}.powder-slide-rotations>.rotation>.artifact:hover{-webkit-filter:grayscale(0);filter:grayscale(0)}.powder-slide-rotations>.rotation>.artifact.focused{flex:0 0 400px;max-width:400px}.powder-slide-rotations>.rotation>.artifact>.artwork{z-index:-1;position:absolute;top:0;left:50%;transform:translateX(-50%);height:100%;width:100%;-o-object-fit:cover;object-fit:cover;transition:opacity .3s ease;opacity:0}.powder-slide-rotations>.rotation>.artifact>.vertical-name{-webkit-writing-mode:vertical-lr;writing-mode:vertical-lr;text-orientation:inherit;transform:rotate(180deg);position:absolute;bottom:0;right:0;font-size:30px;color:#ff0;text-shadow:0 0 5px #e91414;pointer-events:none}.rotation-list-btn{float:right;padding:6px;margin:2px 10px 2px 0;cursor:pointer;background-color:#0001;border:none;font-size:16px;height:40px;width:40px;border-radius:4px}.rotation-list-box{position:absolute;height:calc(100% - 45px);top:45px;width:300px;right:0;overflow:auto;z-index:1}.rotation-list-box>.elements{padding:10px;cursor:pointer}.rotation-list-box>.elements.active,.rotation-list-box>.elements:not(.active):hover{background-color:#05050540}",""]),e["default"]=a},64063:function(t,e,n){"use strict";n.r(e);var i=n(8081),o=n.n(i),r=n(23645),s=n.n(r),a=s()(o());a.push([t.id,".search-box-pos{position:fixed;z-index:100;right:90px;top:0;width:328px;display:flex;flex-direction:column}.ch-search-box{background-color:#1d1d21;border-radius:5px;box-shadow:0 0 2px 2px #00000082;display:flex;padding:10px 15px;align-items:center;color:#a6a6a6;font-size:13px;text-align:center;transition:all .4s ease;z-index:1}.ch-search-box>input{background-color:transparent;border:none;color:#fff;outline:none;width:50%;font-size:12px;text-align:start;padding:8px 0}.ch-search-box>div{flex:1.6;border-right:2px solid #454343;padding:8px 0;margin-right:10px}.ch-search-box>span{flex:1;border-radius:100%}.ch-search-box>span.disabled{color:#ffffff1c}.ch-search-box>span:not(.disabled):hover{background-color:#ffffff1c;padding:8px 0}.search-results-box{top:0;right:0;padding:20px 0;max-height:300px;background-color:#1d1d21;color:#fff;overflow-y:auto;order:1;margin:0 10px;border-radius:0 0 8px 8px;scrollbar-width:none;box-shadow:0 0 2px 2px #00000082}.search-results-box.hidebox{height:0;padding:0;opacity:0}.search-results-box .item{cursor:pointer;padding:8px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;text-align:start;z-index:99}",""]),e["default"]=a},26771:function(t,e,n){"use strict";n(21249);var i=n(66252),o=n(76163);e["Z"]={name:"ctrlf-component",props:{events:{type:Array,required:!1,default:function(){return[]}},renderBox:{type:Boolean,required:!1,default:!0},searchFunction:{type:Function,required:!0},toDisplay:{type:Function,required:!0}},data:function(){return{render:!1,localRenderBox:!1,current:0,results:[],hideResultsBox:!1}},watch:{renderBox:{immediate:!0,handler:function(t){this.localRenderBox=t}}},computed:{mobile:function(){return!0}},created:function(){document.addEventListener("keydown",this.openCtrl,!0)},beforeUnmount:function(){document.removeEventListener("keydown",this.openCtrl,!0)},mounted:function(){},methods:{openCtrl:function(t){t.ctrlKey&&"f"===t.key&&(t.preventDefault(),this.render=!0,this.openSearchBar())},openSearchBar:function(){this.render=!0,this.focusInput(),this.selectInputContent()},focus:function(){this.focusInput(),this.selectInputContent()},focusInput:function(){var t=this;this.$nextTick((function(){t.$refs["input-search-box"].focus()}))},selectInputContent:function(){var t=this;this.$nextTick((function(){t.$refs["input-search-box"].select()}))},searchEvent:(0,o.Ds)((function(t){this.results=this.searchFunction(t.target.value),this.current=0,this.clickEvent(this.results[this.current])}),400),goToSearchEvent:function(t){this.results.length&&(this.current=t,this.current<0&&(this.current=this.results.length-1),this.current>this.results.length-1&&(this.current=0),this.clickEvent(this.results[this.current]))},clickEvent:function(t){this.$emit("event",t)},closeSearchBar:function(){this.render=!1}},render:function(){var t=this;return(0,i.h)("div",{class:"search-box-pos",style:{display:this.render?"":"none"}},[(0,i.h)("div",{class:"ch-search-box"},[(0,i.h)("input",{ref:"input-search-box",onInput:function(e){return t.searchEvent(e)},onKeydown:function(e){("enter"===e.key||13===e.keyCode)&&t.goToSearchEvent(t.current+1)},autocomplete:"off"}),(0,i.h)("div",{},Math.min(this.current+1,this.results.length)+"/"+this.results.length),(0,i.h)("span",{class:["fas fa-angle-up",{disabled:0===this.results.length}],onClick:function(){return t.goToSearchEvent(t.current+1)}}),(0,i.h)("span",{class:["fas fa-angle-down",{disabled:0===this.results.length}],onClick:function(){return t.goToSearchEvent(t.current-1)}}),(0,i.h)("span",{class:"fas fa-bars",onClick:function(){return t.localRenderBox=!t.localRenderBox}}),(0,i.h)("span",{class:"fas fa-times",onClick:function(){return t.closeSearchBar()}})]),this.localRenderBox?(0,i.h)("div",{class:["search-results-box",{hidebox:this.hideResultsBox}]},this.results.map((function(e,n){return(0,i.h)("div",{class:["item",{active:n===t.current}],onClick:function(){return t.goToSearchEvent(n)}},t.toDisplay(e))}))):null])}}},76163:function(t,e,n){"use strict";n.d(e,{Ds:function(){return i},P2:function(){return o}});n(74916),n(23123);function i(t,e){var n=null;return function(){clearTimeout(n);var i=arguments,o=this;n=setTimeout((function(){t.apply(o,i)}),e)}}function o(t,e){var n=!1;return function(){n||(t.apply(this,arguments),n=!0,setTimeout((function(){n=!1}),e))}}},38732:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return g}});n(41539),n(33948),n(54747),n(57327),n(82772),n(21249);var i=n(66252),o=n(49963),r=n(46909),s=n(42536),a=n(35089),l=n(76163),c={};function h(t){c.start||(c.start=t.touches[0]||t.changedTouches[0])}function d(t){t.preventDefault()}function u(t){var e=t.touches[0]||t.changedTouches[0];if(c.start){if(c.start.clientX-e.clientX>50){var n=new CustomEvent("swipe-left",{bubbles:!0,cancelable:!1});t.target.dispatchEvent(n)}else if(c.start.clientX-e.clientX<-50){var i=new CustomEvent("swipe-right",{bubbles:!0,cancelable:!1});t.target.dispatchEvent(i)}else if(c.start.clientY-e.clientY>50){var o=new CustomEvent("swipe-down",{bubbles:!0,cancelable:!1});t.target.dispatchEvent(o)}else if(c.start.clientY-e.clientY<-50){var r=new CustomEvent("swipe-up",{bubbles:!0,cancelable:!1});t.target.dispatchEvent(r)}delete c.start}}var f={name:"powder-shop",components:{ctrlf:r.Z},data:function(){return{shop:[],artifacts:null,slide:0,focused:null,observer:null,animationEnter:"slide-from-right",openShopList:!1}},computed:{mobile:function(){return this.$store.state.isMobile},saveDataMode:function(){return this.mobile}},watch:{slide:function(t,e){this.focused=null,this.animationEnter=e>t?"slide-from-right":"slide-from-left"}},beforeCreate:function(){this.$store.commit("loading",!0)},created:function(){var t=this;this.toggleLoading(!0),Promise.all([this.$store.dispatch("GET_POWDER_SHOP"),this.$store.dispatch("GET_ARTIFACT_DB")]).then((function(e){t.shop=e[0],t.artifacts=e[1],t.ready=!0,t.$nextTick((function(){t.toggleLoading(!1),t.createObserver();var e=document.getElementById("shop-slides");e.addEventListener("wheel",t.mousewheel,{passive:!0}),document.addEventListener("keydown",t.handleKeyDown,!1),e.addEventListener("touchstart",h,{passive:!0}),e.addEventListener("touchmove",d,{passive:!1}),e.addEventListener("touchend",u,{passive:!0})}))})).catch((function(t){return console.log(t)}))},beforeUnmount:function(){var t=this,e=document.getElementById("shop-slides");document.removeEventListener("keydown",this.handleKeyDown),e.removeEventListener("wheel",this.mousewheel),e.removeEventListener("touchstart",h),e.removeEventListener("touchmove",d),e.removeEventListener("touchend",u);var n=document.querySelectorAll("li");n.forEach((function(e){t.observer.unobserve(e)})),this.destroyObserver(),this.observer=null},mounted:function(){},beforeUpdate:function(){},updated:function(){},methods:{home:function(){this.$store.commit("toggleMainMenu")},toggleLoading:function(t,e){this.$store.commit("loading",t,e)},loading:function(){var t=this;return this.$store.commit("loading",!0),new Promise((function(e){setTimeout((function(){e(),t.$nextTick((function(){t.$store.commit("loading",!1)}))}),0)}))},artifact:function(t){return this.$store.getters.getArtifact(t)},getArtifactName:function(t){return this.$store.getters.getArtifactName(t)},getArtifactIcon:function(t){return this.$store.getters.getArtifactIcon(t)},getArtifactImage:function(t){return this.$store.getters.getArtifactImage(t)},getRarityIcon:function(t){return this.$store.getters.getRarityIcon(t)},getRoleIcon:function(t){return this.$store.getters.getRoleIcon(t)},toggleShopList:function(){this.openShopList=!this.openShopList},focusArtifact:function(t){this.focused!==t?this.focused=t:this.focused=null},searchFunction:function(t){var e=this,n=this.shop;if(!n.length||!t)return[];var i=t.toLowerCase();return n.filter((function(t){return!(!t.a||!Array.isArray(t.a))&&t.a.some((function(t){return-1!==e.$store.getters.getArtifactName(t.id).toLowerCase().indexOf(i)}))}))},searchToDisplay:function(t){return t.dt.join(" ~ ")},goToResult:function(t){var e=this;this.shop.forEach((function(n,i){n===t&&(e.slide=i)}))},mousewheel:(0,l.P2)((function(t){t.deltaY<0?this.slide>0&&(document.getElementById("shop-slides").scrollTop=(this.slide-1)*window.innerHeight):this.slide<this.shop.length&&(document.getElementById("shop-slides").scrollTop=(this.slide+1)*window.innerHeight)}),300),scrollSlide:function(){var t=this,e=document.body.scrollTop;window.requestAnimationFrame((function(){var n=document.body.scrollTop;e>=n?t.slide>0&&(window.scrollY=(t.slide-1)*window.innerHeight-10):t.slide<t.shop.length&&(window.scrollY=(t.slide+1)*window.innerHeight-10)}))},scrollBySwipe:function(t){t>0&&this.slide<this.shop.length?document.getElementById("shop-slides").scrollTop=(this.slide+1)*window.innerHeight:t<0&&this.slide>0&&(document.getElementById("shop-slides").scrollTop=(this.slide-1)*window.innerHeight)},handleKeyDown:(0,l.P2)((function(t){t.ctrlKey||"INPUT"!==t.target.tagName&&"TEXTAREA"!==t.target.tagName&&"true"!=t.target.contentEditable&&(t.preventDefault(),39===t.keyCode||"ArrowRight"===t.key||40===t.keyCode||"ArrowDown"===t.key||68===t.keyCode||"d"===t.key?this.scrollBySwipe(1):37!==t.keyCode&&"ArrowLeft"!==t.key&&38!==t.keyCode&&"ArrowUp"!==t.key&&65!==t.keyCode&&"a"!==t.key||this.scrollBySwipe(-1))}),300),scrollToSelected:function(t){document.getElementById("shop-slides").scrollTop=t*window.innerHeight},createObserver:function(){var t=this,e={root:null,rootMargin:"0px",threshold:.8};this.observer=new IntersectionObserver((function(e){e.forEach((function(e){var n=parseInt(e.target.attributes.index.value);e.isIntersecting&&(t.slide=n)}))}),e);var n=document.querySelectorAll("li");n.forEach((function(e){t.observer.observe(e)}))},destroyObserver:function(){this.observer&&this.observer.disconnect()}},render:function(){var t=this;return(0,i.h)("section",{class:"",id:"shop-container"},[(0,i.h)(s.Z,{mobile:this.mobile,options:[{title:"Search",class:"fa fa-search",click:"search"},{title:"Home",class:"fa fa-home",click:"home"}],onHome:function(){return t.home()},onSearch:function(){return t.$refs.ctrlf.openSearchBar()}}),(0,i.h)(r.Z,{ref:"ctrlf",events:this.shop,searchFunction:this.searchFunction,toDisplay:this.searchToDisplay,onEvent:this.goToResult}),(0,i.h)("ul",{style:{width:"100%",height:"100%",overflow:"auto"},id:"shop-slides",onSwipeLeft:function(){return t.scrollBySwipe(1)},onSwipeRight:function(){return t.scrollBySwipe(-1)},onSwipeUp:function(){return t.scrollBySwipe(-1)},onSwipeDown:function(){return t.scrollBySwipe(1)}},[this.shop[this.slide]?(0,i.h)(o.uT,{name:this.animationEnter},(function(){return[(0,i.h)("div",{key:t.slide,class:"powder-slide-rotations",style:{position:"absolute","z-index":1,top:0,left:0}},[(0,i.h)("div",{class:"title-container"},[(0,i.h)("button",{class:["fa rotation-list-btn",{"fa-list":!t.openShopList,"fa-times":t.openShopList}],onClick:function(){return t.toggleShopList()}}),t.shop[t.slide].nid?(0,i.wy)((0,i.h)("a",{target:"_blank",href:"https://page.onstove.com/epicseven/global/view/"+t.shop[t.slide].nid,crossorigin:"anonymous",SameSite:"Lax",style:{float:"right",height:"100%",width:"110px","margin-right":"14px",background:"url(https://static-cdn.onstove.com/0.0.14/img/gnb/bi.svg) no-repeat scroll 0% 50%"}}),[[a.Z,"Read notice on stove"]]):null,(0,i.h)("span",{style:{float:"left","padding-left":"10px"}},t.slide+1+"/"+t.shop.length),(0,i.h)("div",{style:{margin:"0 180px 0 55px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},t.shop[t.slide].dt.join(" ~ "))]),(0,i.h)("div",{class:"rotation"},[t.saveDataMode?(0,i.h)("div",{style:{"align-self":"center",width:"100%","max-width":"450px"}},[t.shop[t.slide].a.map((function(e){var n=(window.innerHeight-100)/t.shop[t.slide].a.length+"px";return(0,i.h)("div",{style:{display:"flex",width:"100%","align-items":"center"}},[(0,i.h)("img",{src:t.getArtifactIcon(e.id),crossorigin:"anonymous",SameSite:"Lax",style:{height:n}}),(0,i.h)("img",{src:t.getRoleIcon(t.artifact(e.id).role),style:{height:"30px"}}),(0,i.h)("span",{style:{flex:1,margin:"0 20px"}},t.getArtifactName(e.id)),(0,i.h)("span",{style:{overflow:"hidden","white-space":"nowrap","padding-left":"8px"}},new Array(t.artifact(e.id).rarity||1).fill((0,i.h)("img",{src:t.getRarityIcon(),style:{height:"20px","margin-left":"-8px","vertical-align":"middle"}})))])}))]):t.shop[t.slide].a.map((function(e,n){return(0,i.h)("div",{class:["artifact",{focused:t.focused===n}],onClick:function(){return t.focusArtifact(n)}},[(0,i.h)("img",{class:"artwork",crossorigin:"anonymous",SameSite:"Lax",src:t.getArtifactImage(e.id),onLoad:function(t){return t.target.style.opacity=1}}),(0,i.h)("span",{style:{"padding-left":"8px"}},new Array(t.artifact(e.id).rarity||1).fill((0,i.h)("img",{src:t.getRarityIcon(),SameSite:"Lax",crossorigin:"anonymous",style:{height:"20px","margin-left":"-8px","vertical-align":"middle"}}))),(0,i.h)("span",{class:"vertical-name"},t.getArtifactName(e.id))])})),t.shop[t.slide].content?(0,i.h)("div",{innerHTML:t.shop[t.slide].content}):null])])]})):null,this.shop.map((function(t,e){return(0,i.h)("li",{class:"powder-slide-rotations",style:{visibility:"hidden"},index:e},[(0,i.h)("div",{class:"title-container"},"Data della rotazione"),(0,i.h)("div",{class:"rotation"})])}))]),this.shop&&this.openShopList?(0,i.h)("div",{class:"glass-container rotation-list-box"},[this.shop.map((function(e,n){return(0,i.h)("div",{class:["elements",{active:t.slide===n}],onClick:function(){return t.scrollToSelected(n)}},n+1+". "+e.dt[0])}))]):null])}};n(32171);const p=f;var g=p},46909:function(t,e,n){"use strict";var i=n(93134);n(92524);const o=i.Z;e["Z"]=o},93134:function(t,e,n){"use strict";n.d(e,{Z:function(){return i.Z}});var i=n(26771)},92524:function(t,e,n){"use strict";n(8621)},32171:function(t,e,n){var i=n(24234);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var o=n(54402).Z;o("616f670a",i,!0,{sourceMap:!1,shadowMode:!1})},8621:function(t,e,n){var i=n(64063);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var o=n(54402).Z;o("5e77d4b6",i,!0,{sourceMap:!1,shadowMode:!1})}}]);